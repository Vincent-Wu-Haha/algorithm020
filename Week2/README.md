# 学习笔记

-------

## map

map使用的是数组加上一个链表，类似于一个桶。

优化的版本把链表换成了红黑树，当然我觉得可能用跳表可能也不错。

java中map的大小是2的倍数，每次扩大时，都是增大2倍。这样迁移数据时就有一半的数据有可能不需要迁移，因为余数是一样的。

在redis中我记得map中是有一个迁移因子的东西，迁移因子以内的数据表明已经迁移到了新的数据区域，可以直接在新的区域中找到数据，迁移因子以外的数据表明还没有迁移完成。这样进一步提升了map的并发能力。

## HeapSort

1）构造一遍最大堆。从非叶子节点往上遍历一遍

2）每次取掉最上面的点，和数组最后一个元素交换。

3）重新从上到下进行调整

这个最大堆的调整方式不需要从下至上进行调整，他是从末尾的非叶子节点往上遍历，保证了所有节点进行了处理。

